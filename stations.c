/*
This file contains a list of stations as well a lookup routine that
uses binary search 
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "ray.h"

#define NSTAT 86
Station statList[NSTAT] = { 
 "ada", 65.01879, -15.57452, 0.443,
 "alf", 63.49104, -19.18440, 0.132,
 "asb", 64.74818, -21.32535, 0.094,
 "ask", 65.05192, -16.64819, 0.955,
 "asm", 63.83361, -20.61474, 0.022,
 "aus", 63.67231, -19.08079, 1.373,
 "bar", 64.64017, -17.44633, 1.890,
 "bas", 63.67570, -19.47592, 0.300,
 "bja", 63.94590, -21.30258, 0.057,
 "bjk", 64.46898, -16.75247, 1.572,
 "bre", 66.12336, -17.90967, 0.041,
 "bru", 64.82886, -16.08850, 0.751,
 "dim", 65.96151, -16.93192, 0.266,
 "djk", 64.50405, -17.23571, 1.683,
 "dyn", 64.79086, -17.36626, 1.209,
 "ent", 63.70102, -19.18226, 1.355,
 "esk", 63.52503, -19.45080, 0.095,
 "fag", 63.87478, -16.65364, 0.027,
 "fed", 64.02508, -19.69086, 0.432,
 "fla", 66.16069, -17.84750, 0.013,
 "gha", 65.84346, -16.66291, 0.396,
 "ghs", 65.85778, -16.62721, 0.405,
 "gil", 66.07734, -16.35131, 0.134,
 "glu", 64.98064, -15.08544, 0.115,
 "god", 63.65976, -19.32236, 1.200,
 "gra", 65.91760, -17.57855, 0.024,
 "grf", 64.40656, -17.26713, 1.710,
 "gri", 66.54152, -18.00951, 0.036,
 "grs", 65.63811, -16.12409, 0.378,
 "grv", 63.85716, -22.45583, 0.052,
 "gyg", 64.28107, -20.21483, 0.119,
 "hae", 64.02611, -16.98858, 0.263,
 "haf", 64.04257, -21.91870, 0.070,
 "ham", 64.48020, -17.82229, 1.560,
 "hau", 63.96851, -19.96471, 0.096,
 "hed", 66.08080, -17.30975, 0.075,
 "hei", 64.19978, -21.23604, 0.162,
 "hla", 65.94441, -18.38724, 0.037,
 "hra", 63.95619, -19.21498, 0.896,
 "hrn", 66.11000, -20.12252, 0.015,
 "hus", 64.29550, -17.65650, 1.314,
 "hva", 64.95473, -15.86928, 0.703,
 "hve", 64.86979, -19.56661, 0.640,
 "hvo", 63.52610, -18.84781, 0.196,
 "iey", 64.09534, -18.12391, 0.652,
 "jok", 64.31529, -18.22546, 0.736,
 "kal", 63.94761, -17.68698, 0.078,
 "kas", 64.02290, -21.85200, 0.108,
 "kre", 64.78369, -16.38282, 0.760,
 "kri", 63.87810, -22.07646, 0.146,
 "kro", 64.09806, -21.11976, 0.147,
 "ksk", 64.16130, -16.47370, 0.940,
 "kud", 64.32059, -21.87472, 0.028,
 "kve", 64.67805, -16.67751, 1.786,
 "kvo", 65.71392, -16.88130, 0.572,
 "lei", 66.40665, -16.48957, 0.041,
 "lod", 63.73440, -18.79094, 0.402,
 "mel", 65.57002, -16.65725, 0.370,
 "mid", 63.65833, -19.88573, 0.132,
 "mjo", 63.93295, -19.67238, 0.704,
 "mko", 64.97840, -16.33826, 0.690,
 "mok", 64.97784, -16.33909, 0.660,
 "nyl", 63.97368, -22.73792, 0.007,
 "ren", 65.64699, -16.90591, 0.338,
 "rju", 63.61745, -18.67210, 0.173,
 "rne", 63.81681, -22.70563, 0.019,
 "san", 64.05601, -21.57013, 0.208,
 "sau", 63.98983, -20.41519, 0.074,
 "sig", 66.13229, -18.91483, 0.010,
 "skh", 63.45347, -19.09453, 0.070,
 "ski", 65.86982, -17.02696, 0.316,
 "skr", 64.56014, -18.38647, 0.858,
 "sly", 63.82402, -19.11732, 0.633,
 "snb", 63.73637, -18.63068, 0.245,
 "sol", 63.92896, -20.94357, 0.030,
 "sva", 65.33691, -17.25454, 0.403,
 "tho", 64.93372, -16.67558, 0.691,
 "urh", 64.82037, -17.14712, 1.078,
 "vat", 64.18664, -18.91768, 0.573,
 "ves", 63.44291, -20.28664, 0.055,
 "vme", 63.42700, -20.29389, 0.076,
 "vog", 63.96967, -22.39285, 0.007,
 "von", 64.67322, -17.75582, 0.999,
 "vos", 63.85279, -21.70357, 0.008,
 "vot", 64.27081, -17.18254, 1.041,
 "vsh", 64.80775, -15.72768, 0.860
}  ;

Station *lookUpStation( char *name ) 
{
	Station *p0, *pp, *p1 ;
	int test ;
	p0 = statList ;
	p1 = statList + (NSTAT - 1 ) ;
	while ( p0 < p1 ) {
		pp = p0 + ( p1 - p0)/2 ;
#ifdef TEST
		printf("%s %s %s %s %2d %2d %2d\n",name,p0->name,pp->name,p1->name,
			p0-statList,pp-statList,p1-statList) ; 
#endif
		test = strcmp(pp->name,name) ;
		if( 0 == test ) return pp ;
		if( test > 0 ) p1 = pp ;
		else p0 = pp+1 ;
	}
	return NULL ;
}

#ifdef TEST
int main()
{
	Station a, *ap ;
	int i ;
	a = statList[3] ;
	printf("%s %f %f %f\n",a.name,a.lat,a.lon,a.depth) ;
	for( i = 0 ; i < NSTAT-1 ; i++) {
		ap =  lookUpStation(statList[i].name) ;
		printf("%s %f %f %f\n",ap->name,ap->lat,ap->lon,ap->depth) ;
	}
	return 0 ;
}
#endif
